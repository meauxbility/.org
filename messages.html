<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Meauxbility Messages - Communication hub for spinal cord injury survivors, families, and supporters across Louisiana's Acadiana region.">
    <title>Messages | Meauxbility - Communication Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        /* Messages Page Specific Styles */
        .messages-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            height: calc(100vh - 80px);
            margin-top: 80px;
            background: var(--white);
        }

        [data-theme="dark"] .messages-container {
            background: var(--gray-900);
        }

        .sidebar {
            background: var(--gray-50);
            border-right: 1px solid var(--gray-200);
            padding: var(--spacing-lg);
            overflow-y: auto;
        }

        [data-theme="dark"] .sidebar {
            background: var(--gray-800);
            border-right-color: var(--gray-700);
        }

        .compose-btn {
            width: 100%;
            margin-bottom: var(--spacing-xl);
            background: var(--teal);
            color: var(--white);
            border: none;
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            font-weight: var(--font-weight-semibold);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .compose-btn:hover {
            background: var(--teal-dark);
            transform: translateY(-1px);
        }

        .folder-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .folder-item {
            margin-bottom: var(--spacing-xs);
        }

        .folder-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--gray-600);
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            font-weight: var(--font-weight-medium);
        }

        [data-theme="dark"] .folder-link {
            color: var(--gray-300);
        }

        .folder-link:hover,
        .folder-link.active {
            background: var(--gray-100);
            color: var(--teal);
        }

        [data-theme="dark"] .folder-link:hover,
        [data-theme="dark"] .folder-link.active {
            background: var(--gray-700);
            color: var(--mint);
        }

        .folder-icon {
            width: 20px;
            height: 20px;
        }

        .folder-count {
            margin-left: auto;
            background: var(--gray-200);
            color: var(--gray-600);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: var(--font-weight-semibold);
        }

        [data-theme="dark"] .folder-count {
            background: var(--gray-600);
            color: var(--gray-300);
        }

        .main-content {
            display: flex;
            flex-direction: column;
            background: var(--white);
        }

        [data-theme="dark"] .main-content {
            background: var(--gray-900);
        }

        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--gray-200);
            background: var(--white);
        }

        [data-theme="dark"] .toolbar {
            background: var(--gray-800);
            border-bottom-color: var(--gray-700);
        }

        .toolbar-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .toolbar-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .search-box {
            display: flex;
            align-items: center;
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            padding: var(--spacing-sm) var(--spacing-md);
            min-width: 300px;
        }

        [data-theme="dark"] .search-box {
            background: var(--gray-700);
        }

        .search-input {
            border: none;
            background: none;
            outline: none;
            flex: 1;
            font-size: 0.875rem;
            color: var(--gray-700);
        }

        [data-theme="dark"] .search-input {
            color: var(--gray-300);
        }

        .search-input::placeholder {
            color: var(--gray-500);
        }

        .toolbar-btn {
            background: none;
            border: none;
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            color: var(--gray-600);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        [data-theme="dark"] .toolbar-btn {
            color: var(--gray-300);
        }

        .toolbar-btn:hover {
            background: var(--gray-100);
            color: var(--gray-800);
        }

        [data-theme="dark"] .toolbar-btn:hover {
            background: var(--gray-700);
            color: var(--white);
        }

        .messages-list {
            flex: 1;
            overflow-y: auto;
            background: var(--white);
        }

        [data-theme="dark"] .messages-list {
            background: var(--gray-900);
        }

        .message-item {
            display: flex;
            align-items: center;
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--gray-100);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        [data-theme="dark"] .message-item {
            border-bottom-color: var(--gray-800);
        }

        .message-item:hover {
            background: var(--gray-50);
        }

        [data-theme="dark"] .message-item:hover {
            background: var(--gray-800);
        }

        .message-item.unread {
            background: var(--gray-50);
            font-weight: var(--font-weight-semibold);
        }

        [data-theme="dark"] .message-item.unread {
            background: var(--gray-800);
        }

        .message-checkbox {
            margin-right: var(--spacing-md);
        }

        .message-star {
            margin-right: var(--spacing-md);
            color: var(--gray-400);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .message-star.starred {
            color: #fbbf24;
        }

        .message-sender {
            min-width: 200px;
            font-weight: var(--font-weight-medium);
            color: var(--gray-900);
        }

        [data-theme="dark"] .message-sender {
            color: var(--white);
        }

        .message-content {
            flex: 1;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .message-subject {
            font-weight: var(--font-weight-medium);
            color: var(--gray-800);
        }

        [data-theme="dark"] .message-subject {
            color: var(--gray-200);
        }

        .message-preview {
            color: var(--gray-600);
            font-size: 0.875rem;
        }

        [data-theme="dark"] .message-preview {
            color: var(--gray-400);
        }

        .message-time {
            min-width: 80px;
            text-align: right;
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        [data-theme="dark"] .message-time {
            color: var(--gray-400);
        }

        .compose-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .compose-modal.show {
            display: flex;
        }

        .compose-form {
            background: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        [data-theme="dark"] .compose-form {
            background: var(--gray-800);
        }

        .compose-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--gray-200);
        }

        [data-theme="dark"] .compose-header {
            border-bottom-color: var(--gray-700);
        }

        .compose-body {
            padding: var(--spacing-lg);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: var(--font-weight-medium);
            color: var(--gray-700);
        }

        [data-theme="dark"] .form-group label {
            color: var(--gray-300);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: border-color var(--transition-fast);
        }

        [data-theme="dark"] .form-group input,
        [data-theme="dark"] .form-group textarea {
            background: var(--gray-700);
            border-color: var(--gray-600);
            color: var(--white);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--teal);
        }

        .form-group textarea {
            min-height: 200px;
            resize: vertical;
        }

        .compose-actions {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
            padding: var(--spacing-lg);
            border-top: 1px solid var(--gray-200);
        }

        [data-theme="dark"] .compose-actions {
            border-top-color: var(--gray-700);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .messages-container {
                grid-template-columns: 1fr;
                height: calc(100vh - 60px);
                margin-top: 60px;
            }

            .sidebar {
                display: none;
            }

            .search-box {
                min-width: 200px;
            }

            .message-sender {
                min-width: 120px;
            }

            .compose-form {
                width: 95%;
                margin: var(--spacing-md);
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header Component -->
    <header id="header-component"></header>

    <!-- Main Content -->
    <main id="main-content">
        <div class="messages-container">
            <!-- Sidebar -->
            <div class="sidebar">
                <button class="compose-btn" onclick="openComposeModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                        <path d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    Compose
                </button>

                <ul class="folder-list">
                    <li class="folder-item">
                        <a href="#" class="folder-link active" data-folder="inbox">
                            <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            Inbox
                            <span class="folder-count">12</span>
                        </a>
                    </li>
                    <li class="folder-item">
                        <a href="#" class="folder-link" data-folder="starred">
                            <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
                            </svg>
                            Starred
                            <span class="folder-count">3</span>
                        </a>
                    </li>
                    <li class="folder-item">
                        <a href="#" class="folder-link" data-folder="sent">
                            <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22,2 15,22 11,13 2,9 22,2"/>
                            </svg>
                            Sent
                            <span class="folder-count">8</span>
                        </a>
                    </li>
                    <li class="folder-item">
                        <a href="#" class="folder-link" data-folder="drafts">
                            <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                                <polyline points="10,9 9,9 8,9"/>
                            </svg>
                            Drafts
                            <span class="folder-count">2</span>
                        </a>
                    </li>
                    <li class="folder-item">
                        <a href="#" class="folder-link" data-folder="trash">
                            <svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6"/>
                                <path d="M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
                                <line x1="10" y1="11" x2="10" y2="17"/>
                                <line x1="14" y1="11" x2="14" y2="17"/>
                            </svg>
                            Trash
                            <span class="folder-count">5</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Toolbar -->
                <div class="toolbar">
                    <div class="toolbar-left">
                        <input type="checkbox" class="message-checkbox">
                        <div class="search-box">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px; color: var(--gray-500);">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                            </svg>
                            <input type="text" class="search-input" placeholder="Search messages...">
                        </div>
                    </div>
                    <div class="toolbar-right">
                        <button class="toolbar-btn" title="Refresh">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23,4 23,10 17,10"/>
                                <polyline points="1,20 1,14 7,14"/>
                                <path d="M20.49,9A9,9 0 0,0 5.64,5.64L1,10m22,4l-4.64,4.36A9,9 0 0,1 3.51,15"/>
                            </svg>
                        </button>
                        <button class="toolbar-btn" title="More">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="1"/>
                                <circle cx="19" cy="12" r="1"/>
                                <circle cx="5" cy="12" r="1"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Messages List -->
                <div class="messages-list" id="messages-list">
                    <!-- Messages will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Compose Modal -->
        <div class="compose-modal" id="compose-modal">
            <div class="compose-form">
                <div class="compose-header">
                    <h3>New Message</h3>
                    <button class="modal-close" onclick="closeComposeModal()">&times;</button>
                </div>
                <div class="compose-body">
                    <div class="form-group">
                        <label for="to">To</label>
                        <input type="email" id="to" name="to" placeholder="Enter recipient email">
                    </div>
                    <div class="form-group">
                        <label for="cc">Cc</label>
                        <input type="email" id="cc" name="cc" placeholder="Enter CC email (optional)">
                    </div>
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" id="subject" name="subject" placeholder="Enter subject">
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" name="message" placeholder="Type your message here..."></textarea>
                    </div>
                </div>
                <div class="compose-actions">
                    <button class="btn btn-secondary" onclick="closeComposeModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Component -->
    <footer id="footer-component"></footer>

    <!-- Scripts -->
    <script src="js/load-components.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/footer.js"></script>
    <script>
        // Messages data
        const messagesData = {
            inbox: [
                {
                    id: 1,
                    sender: "Maria Rodriguez",
                    email: "maria@example.com",
                    subject: "Thank you for the mobility grant",
                    preview: "I wanted to thank you for the wheelchair grant. It has changed my life completely...",
                    time: "2 hours ago",
                    unread: true,
                    starred: false
                },
                {
                    id: 2,
                    sender: "James Thompson",
                    email: "james@example.com",
                    subject: "Home modification update",
                    preview: "The bathroom modifications are complete. I can now use the facilities independently...",
                    time: "4 hours ago",
                    unread: true,
                    starred: true
                },
                {
                    id: 3,
                    sender: "Sarah Williams",
                    email: "sarah@example.com",
                    subject: "Community event RSVP",
                    preview: "I'm excited to attend the holiday celebration next week. Count me in for...",
                    time: "1 day ago",
                    unread: false,
                    starred: false
                },
                {
                    id: 4,
                    sender: "Dr. Michael Chen",
                    email: "mchen@healthcare.org",
                    subject: "Medical documentation for grant",
                    preview: "I've completed the medical documentation for your grant application. Please find...",
                    time: "2 days ago",
                    unread: false,
                    starred: true
                },
                {
                    id: 5,
                    sender: "DonMichael",
                    email: "donmichael@example.com",
                    subject: "Equipment recommendation",
                    preview: "I've been researching wheelchairs and found some great options. Here are my recommendations...",
                    time: "3 days ago",
                    unread: false,
                    starred: false
                }
            ],
            starred: [
                {
                    id: 2,
                    sender: "James Thompson",
                    email: "james@example.com",
                    subject: "Home modification update",
                    preview: "The bathroom modifications are complete. I can now use the facilities independently...",
                    time: "4 hours ago",
                    unread: true,
                    starred: true
                },
                {
                    id: 4,
                    sender: "Dr. Michael Chen",
                    email: "mchen@healthcare.org",
                    subject: "Medical documentation for grant",
                    preview: "I've completed the medical documentation for your grant application. Please find...",
                    time: "2 days ago",
                    unread: false,
                    starred: true
                }
            ],
            sent: [
                {
                    id: 6,
                    sender: "Meauxbility Team",
                    email: "info@meauxbility.org",
                    subject: "Grant application received",
                    preview: "Thank you for submitting your grant application. We will review it within 2 business days...",
                    time: "1 hour ago",
                    unread: false,
                    starred: false
                },
                {
                    id: 7,
                    sender: "Meauxbility Team",
                    email: "info@meauxbility.org",
                    subject: "Community event invitation",
                    preview: "You're invited to our monthly support group meeting. We'll be discussing...",
                    time: "1 day ago",
                    unread: false,
                    starred: false
                }
            ],
            drafts: [
                {
                    id: 8,
                    sender: "Meauxbility Team",
                    email: "info@meauxbility.org",
                    subject: "Resource guide update",
                    preview: "We're updating our resource guide with new information about...",
                    time: "2 hours ago",
                    unread: false,
                    starred: false
                }
            ],
            trash: [
                {
                    id: 9,
                    sender: "Spam Sender",
                    email: "spam@example.com",
                    subject: "You've won $1000!",
                    preview: "Congratulations! You've been selected to receive $1000...",
                    time: "1 week ago",
                    unread: false,
                    starred: false
                }
            ]
        };

        let currentFolder = 'inbox';

        // Initialize messages
        document.addEventListener('DOMContentLoaded', function() {
            loadMessages(currentFolder);
            setupEventListeners();
        });

        function setupEventListeners() {
            // Folder navigation
            document.querySelectorAll('.folder-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const folder = this.getAttribute('data-folder');
                    switchFolder(folder);
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-input');
            searchInput.addEventListener('input', function() {
                filterMessages(this.value);
            });
        }

        function switchFolder(folder) {
            currentFolder = folder;
            
            // Update active folder
            document.querySelectorAll('.folder-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-folder="${folder}"]`).classList.add('active');
            
            // Load messages for folder
            loadMessages(folder);
        }

        function loadMessages(folder) {
            const messagesList = document.getElementById('messages-list');
            const messages = messagesData[folder] || [];
            
            messagesList.innerHTML = messages.map(message => `
                <div class="message-item ${message.unread ? 'unread' : ''}" onclick="openMessage(${message.id})">
                    <input type="checkbox" class="message-checkbox" onclick="event.stopPropagation()">
                    <span class="message-star ${message.starred ? 'starred' : ''}" onclick="toggleStar(${message.id}, event)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
                        </svg>
                    </span>
                    <div class="message-sender">${message.sender}</div>
                    <div class="message-content">
                        <span class="message-subject">${message.subject}</span>
                        <span class="message-preview">- ${message.preview}</span>
                    </div>
                    <div class="message-time">${message.time}</div>
                </div>
            `).join('');
        }

        function filterMessages(query) {
            const messages = document.querySelectorAll('.message-item');
            const searchTerm = query.toLowerCase();
            
            messages.forEach(message => {
                const sender = message.querySelector('.message-sender').textContent.toLowerCase();
                const subject = message.querySelector('.message-subject').textContent.toLowerCase();
                const preview = message.querySelector('.message-preview').textContent.toLowerCase();
                
                if (sender.includes(searchTerm) || subject.includes(searchTerm) || preview.includes(searchTerm)) {
                    message.style.display = 'flex';
                } else {
                    message.style.display = 'none';
                }
            });
        }

        function toggleStar(messageId, event) {
            event.stopPropagation();
            const star = event.target.closest('.message-star');
            star.classList.toggle('starred');
            
            // Update message data
            const folder = messagesData[currentFolder];
            const message = folder.find(m => m.id === messageId);
            if (message) {
                message.starred = !message.starred;
            }
        }

        function openMessage(messageId) {
            // In a real app, this would open the message in a detail view
            alert(`Opening message ${messageId}`);
        }

        function openComposeModal() {
            document.getElementById('compose-modal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeComposeModal() {
            document.getElementById('compose-modal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        function sendMessage() {
            const to = document.getElementById('to').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            if (to && subject && message) {
                // In a real app, this would send the message
                alert('Message sent successfully!');
                closeComposeModal();
                
                // Reset form
                document.getElementById('to').value = '';
                document.getElementById('cc').value = '';
                document.getElementById('subject').value = '';
                document.getElementById('message').value = '';
            } else {
                alert('Please fill in all required fields.');
            }
        }

        // Close modal when clicking outside
        document.getElementById('compose-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeComposeModal();
            }
        });
    </script>
</body>
</html>
